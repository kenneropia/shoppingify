import{g as e,c as t,C as r}from"./react.feb47304.js";import{$ as n}from"./resize-observer-polyfill.6f0a07e6.js";import{C as o}from"./react-dom.f1d739b1.js";import{C as i}from"./lodash.debounce.f7746772.js";import{C as a}from"./lodash.throttle.4e7c07b3.js";var c=e(t((function(e,t){function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}Object.defineProperty(t,"__esModule",{value:!0});var f=c(n),s=u(r),l=c(i),d=c(a),h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var v=function(){return(v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function y(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}var b=function(e,t,r,n){switch(t){case"debounce":return l.default(e,r,n);case"throttle":return d.default(e,r,n);default:return e}},m=function(e){return"function"==typeof e},g=function(){return"undefined"==typeof window},O=function(e){return e instanceof Element||e instanceof HTMLDocument},R=function(e,t,r,n){return function(o){var i=o.width,a=o.height;t((function(t){return t.width===i&&t.height===a||t.width===i&&!n||t.height===a&&!r?t:(e&&m(e)&&e(i,a),{width:i,height:a})}))}},w=function(e){function t(t){var n=e.call(this,t)||this;n.cancelHandler=function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)},n.attachObserver=function(){var e=n.props,t=e.targetRef,r=e.observerOptions;if(!g()){t&&t.current&&(n.targetRef.current=t.current);var o=n.getElement();o&&(n.observableElement&&n.observableElement===o||(n.observableElement=o,n.resizeObserver.observe(o,r)))}},n.getElement=function(){var e=n.props,t=e.querySelector,r=e.targetDomEl;if(g())return null;if(t)return document.querySelector(t);if(r&&O(r))return r;if(n.targetRef&&O(n.targetRef.current))return n.targetRef.current;var i=o.findDOMNode(n);if(!i)return null;switch(n.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return i;default:return i.parentElement}},n.createResizeHandler=function(e){var t=n.props,r=t.handleWidth,o=void 0===r||r,i=t.handleHeight,a=void 0===i||i,c=t.onResize;if(o||a){var u=R(c,n.setState.bind(n),o,a);e.forEach((function(e){var t=e&&e.contentRect||{},r=t.width,o=t.height;!n.skipOnMount&&!g()&&u({width:r,height:o}),n.skipOnMount=!1}))}},n.getRenderType=function(){var e=n.props,t=e.render,o=e.children;return m(t)?"renderProp":m(o)?"childFunction":r.isValidElement(o)?"child":Array.isArray(o)?"childArray":"parent"};var i=t.skipOnMount,a=t.refreshMode,c=t.refreshRate,u=void 0===c?1e3:c,s=t.refreshOptions;return n.state={width:void 0,height:void 0},n.skipOnMount=i,n.targetRef=r.createRef(),n.observableElement=null,g()||(n.resizeHandler=b(n.createResizeHandler,a,u,s),n.resizeObserver=new f.default(n.resizeHandler)),n}return p(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){g()||(this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var e,t=this.props,n=t.render,o=t.children,i=t.nodeType,a=void 0===i?"div":i,c=this.state,u={width:c.width,height:c.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return n&&n(u);case"childFunction":return(e=o)(u);case"child":if((e=o).type&&"string"==typeof e.type){var f=y(u,["targetRef"]);return r.cloneElement(e,f)}return r.cloneElement(e,u);case"childArray":return(e=o).map((function(e){return!!e&&r.cloneElement(e,u)}));default:return s.createElement(a,null)}},t}(r.PureComponent);var E=g()?r.useEffect:r.useLayoutEffect;t.default=w,t.useResizeDetector=function(e){void 0===e&&(e={});var t=e.skipOnMount,n=void 0!==t&&t,o=e.refreshMode,i=e.refreshRate,a=void 0===i?1e3:i,c=e.refreshOptions,u=e.handleWidth,s=void 0===u||u,l=e.handleHeight,d=void 0===l||l,h=e.targetRef,p=e.observerOptions,y=e.onResize,m=r.useRef(n),O=r.useRef(null),w=null!=h?h:O,j=r.useRef(),z=r.useState({width:void 0,height:void 0}),H=z[0],P=z[1];return E((function(){if(!g()){var e=R(y,P,s,d);j.current=b((function(t){(s||d)&&t.forEach((function(t){var r=t&&t.contentRect||{},n=r.width,o=r.height;!m.current&&!g()&&e({width:n,height:o}),m.current=!1}))}),o,a,c);var t=new f.default(j.current);return w.current&&t.observe(w.current,p),function(){t.disconnect();var e=j.current;e&&e.cancel&&e.cancel()}}}),[o,a,c,s,d,y,p,w.current]),v({ref:w},H)},t.withResizeDetector=function(e,t){void 0===t&&(t={});var n=function(n){function o(){var e=null!==n&&n.apply(this,arguments)||this;return e.ref=r.createRef(),e}return p(o,n),o.prototype.render=function(){var r=this.props,n=r.forwardedRef,o=y(r,["forwardedRef"]),i=null!=n?n:this.ref;return s.createElement(w,v({},t,{targetRef:i}),s.createElement(e,v({targetRef:i},o)))},o}(r.Component);function o(e,t){return s.createElement(n,v({},e,{forwardedRef:t}))}var i=e.displayName||e.name;return o.displayName="withResizeDetector(".concat(i,")"),r.forwardRef(o)}})));export{c as R};
