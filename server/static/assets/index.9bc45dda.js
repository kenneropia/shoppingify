var e=Object.defineProperty,r=Object.prototype.hasOwnProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,o=(r,t,a)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,s=(e,s)=>{for(var n in s||(s={}))r.call(s,n)&&o(e,n,s[n]);if(t)for(var n of t(s))a.call(s,n)&&o(e,n,s[n]);return e};import{C as n}from"./react.feb47304.js";import{C as i}from"./react-dom.f1d739b1.js";import{T as l}from"./react-hot-toast.9d58ff23.js";import{C as c}from"./axios.6b29e171.js";import{g as d,a as p}from"./date-fns.43a69caf.js";import{j as m,C as u,a as h,b as f,H as g,T as b,V as y,c as w,d as j,I as x,e as v,B as C,F as S,f as _,g as E,h as O}from"./@chakra-ui.cfa332ef.js";import{Q as k,a as I}from"./react-query.72d918e7.js";import"./focus-visible.a1c41e60.js";import"./object-assign.854adb70.js";import"./scheduler.c13aab76.js";import"./@emotion.7a460b2b.js";import"./hoist-non-react-statics.da991e8f.js";import"./react-is.e06272e7.js";import"./@babel.dc43f2d2.js";import"./stylis.bb1903e3.js";import"./lodash.mergewith.bcbf3e94.js";import"./prop-types.9471ffa6.js";import"./@popperjs.a8a4a6a0.js";import"./framer-motion.d103fb6e.js";import"./tslib.2bd10da0.js";import"./style-value-types.558ea47d.js";import"./popmotion.7b246e2b.js";import"./hey-listen.45400d5c.js";import"./framesync.9f9facff.js";import"./react-fast-compare.003997d8.js";import"./@ctrl.afc734ac.js";!function(e=".",r="__import__"){try{self[r]=new Function("u","return import(u)")}catch(t){const a=new URL(e,location),o=e=>{URL.revokeObjectURL(e.src),e.remove()};self[r]=e=>new Promise(((t,s)=>{const n=new URL(e,a);if(self[r].moduleMap[n])return t(self[r].moduleMap[n]);const i=new Blob([`import * as m from '${n}';`,`${r}.moduleMap['${n}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){s(new Error(`Failed to import: ${e}`)),o(l)},onload(){t(self[r].moduleMap[n]),o(l)}});document.head.appendChild(l)})),self[r].moduleMap={}}}("/assets/");const L=c.create({baseURL:"/api",headers:{"Content-type":"application/json"}});L.interceptors.request.use((e=>{var r;return e.headers.authorization=`Bearer ${null==(r=JSON.parse(localStorage.getItem("user")))?void 0:r.token}`,e})),L.interceptors.response.use((e=>e.data));const P=()=>{const e=JSON.parse(localStorage.getItem("user"));return!e||Date.now()>e.jwt_expired_at?null:e||void 0},R=async e=>await(async e=>{const r=await L.post("/user/login",e),{data:{user:{username:t,email:a,id:o}}}=r;let s={username:t,id:o,email:a,token:r.token,jwt_created_at:Date.now(),jwt_expired_at:d(p(Date.now(),{days:29}))};return localStorage.setItem("user",JSON.stringify(s)),s})(e);function D(){const[e,r]=n.useState({}),t=n.createContext({user:e,login:async e=>{const t=await R(e);r(t)},logout:()=>{localStorage.removeItem("user"),r({})},getUser:P});return n.useContext(t)}function U(){const[e,r]=n.useState({email:"",password:""}),[t,a]=n.useState(!1),o=D();return m(u,{bg:"brand.lightGray",w:"100%",h:"100%",children:h(f,{p:"clamp(30px,0px,0px)",pt:"20px",flexDir:"column",alignItems:"center",w:"clamp(40%,400px,100%)",bg:"white",sx:{boxShadow:"0px 0px 10px -7px rgba(0,0,0,0.48)"},children:[m(g,{display:"flex",maxW:"100%",as:"h1",size:"md",fontWeight:"600",children:h(b,{w:"100%",display:"inline",children:[h(b,{display:"inline",color:"brand.lightOrange",children:["Shoppingify"," "]}),"allows you to take your shopping list whereever you go"]})}),m(b,{fontWeight:"600",w:"100%",display:"inline-flex",mt:"15px",children:"Log into your account."}),h(y,{mt:"5px",alignItems:"start",as:"form",w:"100%",flexDir:"column",children:[h(w,{isRequired:!0,children:[m(j,{htmlFor:"name",children:"Email"}),m(x,{onChange:e=>r((r=>s(s({},r),{email:e.target.value.trim()}))),value:e.name,id:"Email",placeholder:"Email"})]}),h(w,{isRequired:!0,children:[m(j,{htmlFor:"password",children:"Password"}),m(x,{onChange:e=>r((r=>s(s({},r),{password:e.target.value.trim()}))),value:e.password,id:"password",placeholder:"password"})]}),m(w,{isInvalid:t,children:m(v,{color:"red",children:t})}),m(C,{onClick:async r=>{if(r.preventDefault(),e.email&&e.password)try{await o.login(e),a(!1),location.reload()}catch(t){t.response.data.error.message?a(t.response.data.error.message):t.response?a(t.response.data.message):t.message&&a(t.message)}},color:"white",bg:"brand.lightOrange",disabled:!e.email||!e.password&&!0,type:"submit",children:"Submit"})]}),m(b,{children:"email is aaron@kenny.com and password is 12345678"})]})})}let W;const $={},F=function(e,r){if(!r)return e();if(void 0===W){const e=document.createElement("link").relList;W=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(r.map((e=>{if(e in $)return;$[e]=!0;const r=e.endsWith(".css"),t=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const a=document.createElement("link");return a.rel=r?"stylesheet":W,r||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),r?new Promise(((e,r)=>{a.addEventListener("load",e),a.addEventListener("error",r)})):void 0}))).then((()=>e()))};class M extends n.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e){e.message&&e.message}render(){const{children:e}=this.props;return this.state.hasError?m(q,{error:this.state.error}):m(S,{children:e})}}const q=({error:e})=>m(u,{height:"100vh",children:h(f,{alignItems:"center",flexDirection:"column",children:[m(b,{fontSize:"3xl",fontWeight:"700",children:(null==e?void 0:e.message)?e.message:"Sorry, an error occurred"}),m(C,{mt:"30px",color:"white",bgColor:"brand.darkWine",width:"50%",onClick:()=>location.reload(),children:"Reload"})]})}),z=n.lazy((()=>F((()=>__import__("./index.b227e241.js")),["/assets/index.b227e241.js","/assets/react.feb47304.js","/assets/object-assign.854adb70.js","/assets/@chakra-ui.cfa332ef.js","/assets/@emotion.7a460b2b.js","/assets/hoist-non-react-statics.da991e8f.js","/assets/react-is.e06272e7.js","/assets/@babel.dc43f2d2.js","/assets/stylis.bb1903e3.js","/assets/lodash.mergewith.bcbf3e94.js","/assets/react-dom.f1d739b1.js","/assets/scheduler.c13aab76.js","/assets/prop-types.9471ffa6.js","/assets/@popperjs.a8a4a6a0.js","/assets/framer-motion.d103fb6e.js","/assets/tslib.2bd10da0.js","/assets/style-value-types.558ea47d.js","/assets/popmotion.7b246e2b.js","/assets/hey-listen.45400d5c.js","/assets/framesync.9f9facff.js","/assets/react-fast-compare.003997d8.js","/assets/@ctrl.afc734ac.js","/assets/react-hot-toast.9d58ff23.js","/assets/axios.6b29e171.js","/assets/date-fns.43a69caf.js","/assets/react-query.72d918e7.js","/assets/focus-visible.a1c41e60.js"]))),B=n.lazy((()=>F((()=>__import__("./index.c077d08f.js")),["/assets/index.c077d08f.js","/assets/useStore.e8681226.js","/assets/zustand.a3e6d7ee.js","/assets/react-router.5e3691f3.js","/assets/history.b73326bc.js"]))),G=({Component:e})=>m(n.Suspense,{fallback:m(_,{w:"100%",children:"Loading..."}),children:m(e,{})}),T=()=>m(M,{children:h(f,{bg:"brand.lightGray",h:"100%",w:"100%",justifyContent:"space-between",color:"black",position:"relative",children:[m(G,{Component:z}),m(G,{Component:B})]})}),A=()=>D().getUser()?m(T,{}):m(U,{}),J=()=>h(S,{children:[m(l,{}),m(A,{})]}),N=({children:e})=>{const r=n.createContext(null);return m(r.Provider,{value:null,children:e})},V=E({components:{Progress:{defaultProps:{colorScheme:"f9a109"}}},colors:{brand:{lightGray:"#fafafe",darkGray:"#c1c1c4",lightWine:"#fff0de",darkWine:"#80485b",lightOrange:"#f9a109",lightRed:"#eb5858"},ProgressItems:{500:"#f9a109"},ProgressCategories:{500:"#56ccf2"}}}),H=new k;i.render(m(n.StrictMode,{children:m(I,{contextSharing:!0,client:H,children:m(N,{children:m(O,{theme:V,children:m(J,{})})})})}),document.getElementById("root"));export{L as A,F as _};
